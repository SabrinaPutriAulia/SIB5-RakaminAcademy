<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pendaftaran dan List Pendaftar</title>
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- BoxIcons -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <!-- CSS -->
    <style>
      .circle {
        height: 1.5rem;
        width: 1.5rem;
        background-color: black;
        border-radius: 50%;
      }
      .form-register {
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: 1px solid #333;
        width: 100%;
        background: none;
        font-size: 0.9rem;
      }
      input:focus {
        outline: none;
      }
      .width-container {
        width: 70%;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        border-radius: 20px;
      }
      .padding {
        padding: 3rem;
      }
      .margin {
        margin-bottom: 3rem;
      }

      /* Tablet */
      @media (max-width: 768px) {
        .width-container {
          width: 100%;
          min-height: 100vh;
        }
        img {
          width: 70%;
        }
        .padding {
          padding: 0;
        }
        .margin {
          margin-top: 1.5rem;
          margin-bottom: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Form Pendaftan -->
    <div id="Registrasi" class="tabcontent">
      <div class="container bg-white mt-5 width-container">
        <div class="row p-5">
          <!-- Section Left -->
          <div class="col-md-5">
            <img
              src="signin-image.jpg"
              alt="Registration Image"
              class="mx-auto d-block"
            />
            <nav class="nav flex-column">
              <a
                class="nav-link d-flex text-dark mt-3"
                href="#"
                class="tablink"
                onclick="openTab('Registrasi')"
              >
                <div
                  class="circle d-flex justify-content-center align-items-center me-3"
                >
                  <i class="bx bxs-chevron-right text-white"></i>
                </div>
                Registrasi
              </a>

              <a
                class="nav-link d-flex text-dark"
                href="#"
                class="tablink"
                onclick="openTab('ListPendaftar')"
              >
                <div
                  class="circle d-flex justify-content-center align-items-center me-3"
                >
                  <i class="bx bxs-chevron-right text-white"></i>
                </div>
                List Pendaftar
              </a>
            </nav>
          </div>

          <!-- Section Right -->
          <div class="col-md-7">
            <div class="card border-0">
              <div class="card-body padding">
                <h3 class="card-title text-uppercase text-center margin">
                  form registrasi
                </h3>
                <div class="card-text">
                  <form id="registrationForm">
                    <div class="position-relative">
                      <label for="name" class="position-absolute"
                        ><i class="bx bxs-user"></i
                      ></label>
                      <input
                        type="text"
                        id="name"
                        minlength="10"
                        placeholder="Nama"
                        class="form-register ps-4"
                      />
                    </div>
                    <div class="position-relative">
                      <div class="form-text mb-3">
                        Nama Anda harus terdiri dari minimal 10 karakter.
                      </div>
                      <label for="age" class="position-absolute"
                        ><i class="bx bxs-user-detail"></i
                      ></label>
                      <input
                        type="number"
                        id="age"
                        min="25"
                        placeholder="Umur"
                        class="form-register ps-4"
                      />
                      <div class="form-text mb-3">
                        Anda harus berusia minimal 25 tahun.
                      </div>
                    </div>
                    <div class="position-relative">
                      <label for="pocketMoney" class="position-absolute"
                        ><i class="bx bxs-wallet"></i
                      ></label>
                      <input
                        type="number"
                        id="pocketMoney"
                        min="100000"
                        max="1000000"
                        placeholder="Uang Sangu"
                        class="form-register ps-4"
                      />
                      <div class="form-text mb-5">
                        Uang saku Anda harus setidaknya 100000 dan tidak lebih
                        dari 1000000.
                      </div>
                    </div>
                    <div class="text-center">
                      <input
                        type="submit"
                        value="submit"
                        class="px-4 py-2 text-uppercase bg-dark text-white"
                      />
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- List Pendaftar -->
    <div id="ListPendaftar" class="tabcontent" style="display: none">
      <div class="container bg-white mt-5 width-container">
        <div class="row p-5">
          <!-- Section Left -->
          <div class="col-md-5">
            <img
              src="signin-image.jpg"
              alt="Registration Image"
              class="mx-auto d-block"
            />
            <nav class="nav flex-column">
              <a
                class="nav-link d-flex text-dark mt-3"
                href="#"
                class="tablink"
                onclick="openTab('Registrasi')"
              >
                <div
                  class="circle d-flex justify-content-center align-items-center me-3"
                >
                  <i class="bx bxs-chevron-right text-white"></i>
                </div>
                Registrasi
              </a>

              <a
                class="nav-link d-flex text-dark"
                href="#"
                class="tablink"
                onclick="openTab('ListPendaftar')"
              >
                <div
                  class="circle d-flex justify-content-center align-items-center me-3"
                >
                  <i class="bx bxs-chevron-right text-white"></i>
                </div>
                List Pendaftar
              </a>
            </nav>
          </div>

          <!-- Section Right -->
          <div class="col-md-7">
            <div class="card border-0">
              <div class="card-body padding">
                <h3 class="card-title text-uppercase text-center margin">
                  list pendaftar
                </h3>
                <div class="card-text">
                  <table class="table" id="pendaftarTable">
                    <thead>
                      <tr>
                        <th scope="col">Nama</th>
                        <th scope="col">Umur</th>
                        <th scope="col">Uang Sangu</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Dimasukkan nilai dari inputan form -->
                    </tbody>
                  </table>
                  <hr class="border border-dark border-3" />
                  <div id="resume">
                    <!-- Isi resume -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Mendefinisikan class
      class Pendaftar {
        constructor(nama, umur, uangsangu) {
          this.nama = nama;
          this.umur = umur;
          this.uangsangu = uangsangu;
        }

        isValid() {
          return (
            this.nama.length >= 10 &&
            this.umur >= 25 &&
            this.uangsangu >= 100000 &&
            this.uangsangu <= 1000000
          );
        }
      }

      // Array untuk menyimpan data pendaftar
      const daftarPendaftar = [];

      // Validasi form
      document
        .getElementById("registrationForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          const nama = document.getElementById("name").value;
          const umur = parseInt(document.getElementById("age").value);
          const uangsangu = parseInt(
            document.getElementById("pocketMoney").value
          );

          const pendaftar = new Pendaftar(nama, umur, uangsangu);

          if (!pendaftar.isValid()) {
            alert("Data tidak valid. Periksa kembali isian Anda.");
          } else {
            daftarPendaftar.push(pendaftar);
            updateListPendaftar();
          }
        });

      // Menampilkan list pendaftar
      function updateListPendaftar() {
        const table = document
          .getElementById("pendaftarTable")
          .getElementsByTagName("tbody")[0];
        table.innerHTML = "";

        let totalUmur = 0;
        let totalUangSangu = 0;

        for (const pendaftar of daftarPendaftar) {
          const row = table.insertRow(-1);
          const cell1 = row.insertCell(0);
          const cell2 = row.insertCell(1);
          const cell3 = row.insertCell(2);
          cell1.innerHTML = pendaftar.nama;
          cell2.innerHTML = pendaftar.umur;
          cell3.innerHTML = pendaftar.uangsangu;

          totalUmur += pendaftar.umur;
          totalUangSangu += pendaftar.uangsangu;
        }

        const rataRataUmur = (totalUmur / daftarPendaftar.length).toFixed(0);
        const rataRataUangSangu = (
          totalUangSangu / daftarPendaftar.length
        ).toFixed(0);

        const resume = document.getElementById("resume");
        resume.innerHTML = `Rata-rata pendaftar memiliki uang saku sebesar ${rataRataUangSangu} dengan rata-rata umur ${rataRataUmur}`;
      }

      // Fungsi untuk mengaktifkan tab yang dipilih
      function openTab(tabName) {
        tabcontent = document.getElementsByClassName("tabcontent");
        for (let i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        document.getElementById(tabName).style.display = "block";
      }
    </script>
  </body>
</html>
